<Window x:Class="FUMiniHotelManagement.Views.BookingCreateWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Tạo đặt phòng" Height="520" Width="640"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="White"
        FontFamily="Segoe UI">

    <Window.Resources>
        <!-- Palette -->
        <SolidColorBrush x:Key="AccentOrange" Color="#FF7A2A"/>
        <SolidColorBrush x:Key="AccentLight" Color="#FFF3EC"/>
        <SolidColorBrush x:Key="Surface" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#333333"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#666666"/>

        <!-- Common control styles -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style TargetType="Button">
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="MinWidth" Value="90"/>
            <Setter Property="Background" Value="{StaticResource AccentOrange}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="ComboBox">
            <Setter Property="MinWidth" Value="260"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="BorderBrush" Value="#FFE5D6"/>
            <Setter Property="Background" Value="{StaticResource Surface}"/>
        </Style>

        <Style TargetType="ListBox">
            <Setter Property="BorderBrush" Value="#FFE5D6"/>
            <Setter Property="Background" Value="{StaticResource Surface}"/>
            <Setter Property="Padding" Value="4"/>
        </Style>

        <Style TargetType="DatePicker">
            <Setter Property="Padding" Value="4"/>
            <Setter Property="BorderBrush" Value="#FFE5D6"/>
            <Setter Property="Background" Value="{StaticResource Surface}"/>
        </Style>

        <!-- Accent header style -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource AccentOrange}"/>
        </Style>

    </Window.Resources>

    <Grid Margin="18">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <DockPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="Tạo đặt phòng" Style="{StaticResource SectionHeader}" FontSize="18"/>
            <Border Background="{StaticResource AccentLight}" CornerRadius="8" Height="36" HorizontalAlignment="Right" DockPanel.Dock="Right" Padding="10,0" VerticalAlignment="Center">
                <TextBlock Text="FUMiniHotel" Foreground="{StaticResource TextSecondary}" VerticalAlignment="Center"/>
            </Border>
        </DockPanel>

        <!-- Customer -->
        <StackPanel Orientation="Horizontal" Grid.Row="1" VerticalAlignment="Center" Margin="0,0,0,8">
            <TextBlock Text="Khách hàng:" VerticalAlignment="Center" Width="120"/>
            <ComboBox ItemsSource="{Binding Customers}" SelectedItem="{Binding SelectedCustomer}" DisplayMemberPath="CustomerFullName" Width="420"/>
        </StackPanel>

        <!-- Rooms -->
        <StackPanel Orientation="Horizontal" Grid.Row="2" VerticalAlignment="Center" Margin="0,0,0,8">
            <TextBlock Text="Phòng (chọn 1):" VerticalAlignment="Center" Width="120"/>
            <ListBox ItemsSource="{Binding Rooms}"
                     SelectedItem="{Binding SelectedRoomSingular, Mode=TwoWay}"
                     DisplayMemberPath="RoomNumber"
                     Width="420" Height="140"
                     SelectionMode="Single"/>
        </StackPanel>

        <!-- Dates -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,6,0,6">
            <TextBlock Text="Nhận:" VerticalAlignment="Center" Width="60"/>
            <DatePicker SelectedDate="{Binding CheckInDate}" Width="150"/>
            <TextBlock Text="Trả:" VerticalAlignment="Center" Margin="12,0,0,0"/>
            <DatePicker SelectedDate="{Binding CheckOutDate}" Width="150" Margin="8,0,0,0"/>
        </StackPanel>

        <TextBlock Grid.Row="4" Text="Ghi chú: Chọn ngày nhận và trả hợp lệ để tính tổng tiền." Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,4,0,8"/>

        <!-- Price Section moved below to prevent overlap -->
        <Border Grid.Row="5" Background="{StaticResource AccentLight}" CornerRadius="8" Padding="16" Margin="0,8,0,0">
            <StackPanel>
                <TextBlock Text="Tổng" FontSize="12" Foreground="{StaticResource TextSecondary}"/>
                <TextBlock Text="{Binding TotalPrice, StringFormat=Tổng tiền: {0:N0} ₫}" FontSize="20" FontWeight="Bold" Foreground="DarkGreen" Margin="0,6,0,4"/>
                <TextBlock Text="{Binding ValidationMessage}" Foreground="Red" TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <!-- Actions -->
        <StackPanel Grid.Row="6" Orientation="Horizontal" Height="40" HorizontalAlignment="Right" Margin="0,12,0,0">
            <Button Content="Hủy" Width="100" Click="Cancel_Click" Background="Transparent" Foreground="{StaticResource AccentOrange}" BorderBrush="{StaticResource AccentOrange}"/>
            <Button Content="Đặt phòng" Width="120" Command="{Binding SaveCommand}" IsEnabled="{Binding CanSave}" Margin="8,0,0,0"/>
        </StackPanel>

    </Grid>
</Window>